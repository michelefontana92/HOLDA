<root_node>

<task>
    <n_features> 85 </n_features>
    <n_classes>61</n_classes>
    <target>PRINC_SURG_PROC_CODE</target>
</task>

<model>
    <model_fn>models.nn.create_net</model_fn>
    <params>
        <input>85</input>
        <hidden_1>200</hidden_1>
        <hidden_2>100</hidden_2>
        <dropout>0.2</dropout>
        <output>61</output>
    </params>
</model>


<metrics>
    <metric>accuracy</metric>
    <metric>precision</metric>
    <metric>recall</metric>
    <metric>f1</metric>
</metrics>

<setting>
    <use_deltas>True</use_deltas>
    <use_state>True</use_state>
</setting>


<architecture>
    <server>
        <meta>
        <id>ServerS</id>
        <log_path>logs/log_S.txt</log_path>
        <ckpt_best>prova_server/best_check_S.pt</ckpt_best>
        <ckpt_epoch>prova_server/epoch_check_S.pt</ckpt_epoch>
        <save_state_models_path>./provaSalvataggio/ServerS.pt</save_state_models_path>
        <save_all_models_path>./provaSalvataggio/ServerS.pt</save_all_models_path>
        </meta>
            
        <training>
            <epochs>2</epochs>
            <patience>10</patience>
            <epoch2ckpt>10</epoch2ckpt> 
            <sample_size>1</sample_size>
            <from_check>False</from_check>
        </training>

        <proxy>
        <meta>
            <id>ProxyP1</id>
            <log_path>logs/log_P1.txt</log_path>
            <ckpt_best>prova_proxy/best_check_P1.pt</ckpt_best>
            <ckpt_epoch>prova_proxy/epoch_check_P1.pt</ckpt_epoch>
            <save_state_models_path>./provaSalvataggio/ProxyP1.pt</save_state_models_path>
            <save_all_models_path>./provaSalvataggio/ProxyP1.pt</save_all_models_path>
        </meta>
        <training>
            <epochs>2</epochs>
            <patience>10</patience>
        </training>
       

        <client>
                <meta>
                    <id>Client_C1</id>
                    <log_path>logs/log_clientC1.txt</log_path>
                    <ckpt_best>prova_client/clientC1_best.pt</ckpt_best>
                    <ckpt_epoch>prova_client/clientC1_epoch.pt</ckpt_epoch>
                    <train_path>../../../Tesi/TesiFederated/datasets/trade_pruned_federated_dataset/Area_NORTH_WEST/PHR_1/dataset_1_train_over_fold_0.csv</train_path>
                    <val_path>../../../Tesi/TesiFederated/datasets/trade_pruned_federated_dataset/Area_NORTH_WEST/PHR_1/dataset_1_val_fold_0.csv</val_path>
                    <save_state_models_path>./provaSalvataggio/Client_C1.pt</save_state_models_path>
                    <save_all_models_path>./provaSalvataggio/Client_C1.pt</save_all_models_path>
                </meta>

                <training>
                    <epochs>2</epochs>
                    <batch_size>128</batch_size>
                    <patience>5</patience>
                    <epoch2ckpt>10</epoch2ckpt>
                    <use_weights>True</use_weights>
                    <optimizer>
                    <optimizer_fn>torch.optim.Adam</optimizer_fn>
                    <params>
                    <lr>1e-4</lr>
                    </params>
                    </optimizer>
                    <loss>
                    <loss_fn>torch.nn.CrossEntropyLoss</loss_fn>
                    </loss>
                </training>               
            </client>


        <client>
                <meta>
                    <id>Client_C2</id>
                    <log_path>logs/log_clientC2.txt</log_path>
                    <ckpt_best>prova_client/clientC2_best.pt</ckpt_best>
                    <ckpt_epoch>prova_client/clientC2_epoch.pt</ckpt_epoch>
                    <train_path>../../../Tesi/TesiFederated/datasets/trade_pruned_federated_dataset/Area_NORTH_WEST/PHR_10/dataset_10_train_over_fold_0.csv</train_path>
                    <val_path>../../../Tesi/TesiFederated/datasets/trade_pruned_federated_dataset/Area_NORTH_WEST/PHR_10/dataset_10_val_fold_0.csv</val_path>
                </meta>

                <training>
                    <epochs>1</epochs>
                    <batch_size>128</batch_size>
                    <patience>5</patience>
                    <epoch2ckpt>10</epoch2ckpt>
                    <use_weights>True</use_weights>
                    <optimizer>
                    <optimizer_fn>torch.optim.Adam</optimizer_fn>
                    <params>
                    <lr>1e-3</lr>
                    </params>
                    </optimizer>
                    <loss>
                    <loss_fn>torch.nn.CrossEntropyLoss</loss_fn>
                    </loss>
                </training>               
            </client>
     </proxy>
    </server>
</architecture>


</root_node>